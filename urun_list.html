<!DOCTYPE html>
<html lang="tr">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
Â  Â  <title>Altunga Panel v9 (Dinamik)</title>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
Â  Â Â 
Â  Â  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
Â  Â  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
Â  Â  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

Â  Â  <style>
Â  Â  Â  Â  /* --- TEMA --- */
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --bg-body: #f1f5f9; --sidebar-bg: #ffffff; --card-bg: #ffffff;
Â  Â  Â  Â  Â  Â  --border-color: #e2e8f0; --text-main: #1e293b; --text-muted: #64748b;
Â  Â  Â  Â  Â  Â  --primary: #3b82f6; --accent: #10b981; --danger: #ef4444;
Â  Â  Â  Â  Â  Â  --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); --input-bg: #f8fafc;
Â  Â  Â  Â  }
Â  Â  Â  Â  body.dark-mode {
Â  Â  Â  Â  Â  Â  --bg-body: #0f172a; --sidebar-bg: rgba(30, 41, 59, 0.5); --card-bg: rgba(30, 41, 59, 0.7);
Â  Â  Â  Â  Â  Â  --border-color: rgba(255, 255, 255, 0.08); --text-main: #f1f5f9; --text-muted: #94a3b8;
Â  Â  Â  Â  Â  Â  --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5); --input-bg: rgba(0,0,0,0.3);
Â  Â  Â  Â  }
Â  Â  Â  Â  * { box-sizing: border-box; outline: none; }
Â  Â  Â  Â  body { margin: 0; padding: 0; background-color: var(--bg-body); color: var(--text-main); font-family: 'Poppins', sans-serif; height: 100vh; overflow: hidden; transition: background 0.3s, color 0.3s; }

Â  Â  Â  Â  /* Login */
Â  Â  Â  Â  #login-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-body); z-index: 9999; display: flex; justify-content: center; align-items: center; }
Â  Â  Â  Â  .login-box { background: var(--card-bg); padding: 40px; border-radius: 20px; width: 100%; max-width: 350px; text-align: center; border: 1px solid var(--border-color); box-shadow: var(--shadow); }
Â  Â  Â  Â  .modern-input { width: 100%; padding: 12px; margin: 10px 0; background: var(--input-bg); border: 1px solid var(--border-color); color: var(--text-main); border-radius: 8px; font-family: inherit; }
Â  Â  Â  Â  .modern-btn { width: 100%; padding: 12px; background: var(--primary); border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600; }

Â  Â  Â  Â  /* Dashboard */
Â  Â  Â  Â  .dashboard-container { display: none; height: 100vh; width: 100vw; }
Â  Â  Â  Â  .sidebar { width: 260px; background: var(--sidebar-bg); backdrop-filter: blur(20px); border-right: 1px solid var(--border-color); display: flex; flex-direction: column; padding: 20px; flex-shrink: 0; }
Â  Â  Â  Â  .brand { font-size: 1.2rem; font-weight: 700; color: var(--text-main); margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid var(--border-color); display: flex; align-items: center; gap: 10px; }
Â  Â  Â  Â  .add-btn { background: rgba(16, 185, 129, 0.1); color: var(--accent); border: 1px dashed var(--accent); width: 100%; padding: 12px; border-radius: 10px; cursor: pointer; font-weight: 600; margin-bottom: 15px; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px; }
Â  Â  Â  Â  .add-btn:hover { background: var(--accent); color: white; }
Â  Â  Â  Â  .category-list { list-style: none; padding: 0; margin: 0; flex: 1; overflow-y: auto; }
Â  Â  Â  Â  .cat-btn { display: flex; align-items: center; gap: 12px; width: 100%; padding: 12px 15px; margin-bottom: 8px; background: transparent; border: 1px solid transparent; color: var(--text-muted); border-radius: 12px; cursor: pointer; font-size: 0.95rem; text-align: left; font-weight: 500; transition: 0.2s; }
Â  Â  Â  Â  .cat-btn:hover { background: rgba(59, 130, 246, 0.1); color: var(--primary); }
Â  Â  Â  Â  .cat-btn.active { background: rgba(59, 130, 246, 0.15); color: var(--primary); border-color: rgba(59, 130, 246, 0.3); font-weight: 600; }
Â  Â  Â  Â  .sidebar-footer { margin-top: auto; padding-top: 20px; border-top: 1px solid var(--border-color); display: flex; flex-direction: column; gap: 10px; }
Â  Â  Â  Â  .theme-btn { background: var(--input-bg); border: 1px solid var(--border-color); color: var(--text-main); padding: 10px; border-radius: 8px; cursor: pointer; text-align: center; font-size: 0.9rem; }

Â  Â  Â  Â  .main-content { flex: 1; padding: 30px; overflow-y: auto; }
Â  Â  Â  Â  .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
Â  Â  Â  Â  .search-wrapper { position: relative; width: 100%; max-width: 500px; }
Â  Â  Â  Â  .search-input { width: 100%; padding: 14px 20px 14px 45px; background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 12px; color: var(--text-main); box-shadow: var(--shadow); }
Â  Â  Â  Â  .search-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: var(--text-muted); }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; padding-bottom: 50px; }
Â  Â  Â  Â  .product-card { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 16px; padding: 15px; display: flex; flex-direction: column; gap: 10px; transition: 0.3s; box-shadow: var(--shadow); }
Â  Â  Â  Â  .product-card:hover { transform: translateY(-3px); border-color: var(--primary); }
Â  Â  Â  Â  .p-header { display: flex; gap: 12px; align-items: center; }
Â  Â  Â  Â  .p-img { width: 50px; height: 50px; object-fit: contain; background: var(--input-bg); border-radius: 8px; padding: 4px; }
Â  Â  Â  Â  .p-info h4 { margin: 0; font-size: 0.95rem; color: var(--text-main); }
Â  Â  Â  Â  .p-info span { font-size: 0.75rem; color: var(--text-muted); }
Â  Â  Â  Â  .p-footer { margin-top: auto; display: flex; justify-content: space-between; align-items: center; background: var(--input-bg); padding: 8px; border-radius: 8px; }
Â  Â  Â  Â  .price-inp { background: transparent; border: none; color: var(--accent); font-weight: 700; width: 60px; text-align: center; font-size: 1.1rem; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .action-btns { display: flex; gap: 5px; }
Â  Â  Â  Â  .icon-btn { border: none; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 1.1rem; transition:0.2s; }
Â  Â  Â  Â  .btn-save { background: var(--primary); color: white; font-size: 0.8rem; font-weight:600; padding: 8px 12px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* POPULER BUTONU */
Â  Â  Â  Â  .btn-pop { background: rgba(0,0,0,0.05); color: #94a3b8; }
Â  Â  Â  Â  .btn-pop.active { background: #fee2e2; color: #ef4444; border: 1px solid #ef4444; }

Â  Â  Â  Â  .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 10000; display: none; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
Â  Â  Â  Â  .modal-box { background: var(--card-bg); width: 90%; max-width: 400px; padding: 25px; border-radius: 20px; border: 1px solid var(--border-color); box-shadow: 0 20px 40px rgba(0,0,0,0.4); animation: slideUp 0.3s ease; }
Â  Â  Â  Â  @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
Â  Â  Â  Â  .modal-header { margin-bottom: 20px; font-size: 1.2rem; font-weight: 700; color: var(--text-main); }
Â  Â  Â  Â  .form-group { margin-bottom: 15px; }
Â  Â  Â  Â  .form-label { display: block; margin-bottom: 5px; font-size: 0.85rem; color: var(--text-muted); }

Â  Â  Â  Â  @media (max-width: 768px) {
Â  Â  Â  Â  Â  Â  .dashboard-container { flex-direction: column; }
Â  Â  Â  Â  Â  Â  .sidebar { width: 100%; padding: 10px; border-right: none; border-bottom: 1px solid var(--border-color); }
Â  Â  Â  Â  Â  Â  .brand, .sidebar-footer { display: none; }
Â  Â  Â  Â  Â  Â  .category-list { display: flex; gap: 10px; padding-bottom: 0; overflow-x: auto; margin-top: 10px; }
Â  Â  Â  Â  Â  Â  .add-btn { width: auto; margin: 0; }
Â  Â  Â  Â  Â  Â  .cat-btn { width: auto; white-space: nowrap; margin: 0; }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

Â  Â  <div id="login-screen">
Â  Â  Â  Â  <div class="login-box">
Â  Â  Â  Â  Â  Â  <h2 style="color:var(--text-main); margin-top:0;">YÃ¶netici GiriÅŸi</h2>
Â  Â  Â  Â  Â  Â  <input type="email" id="email" class="modern-input" placeholder="E-Posta" value="kasiyer@altunga.com">
Â  Â  Â  Â  Â  Â  <input type="password" id="password" class="modern-input" placeholder="Åifre">
Â  Â  Â  Â  Â  Â  <button class="modern-btn" onclick="login()">Panele Gir</button>
Â  Â  Â  Â  Â  Â  <p id="loginMsg" style="color: var(--danger); font-size: 0.8rem; margin-bottom:0;"></p>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="addModal" class="modal-overlay">
Â  Â  Â  Â  <div class="modal-box">
Â  Â  Â  Â  Â  Â  <div class="modal-header">Yeni ÃœrÃ¼n Ekle</div>
Â  Â  Â  Â  Â  Â  <div class="form-group"><label class="form-label">Kategori</label><select id="newCatSelect" class="modern-input" onchange="checkNewCategory(this)"></select><input type="text" id="newCatInput" class="modern-input" placeholder="Yeni Kategori" style="display:none; margin-top:5px; border-color:var(--accent);"></div>
Â  Â  Â  Â  Â  Â  <div class="form-group"><label class="form-label">Grup</label><input type="text" id="newGroup" class="modern-input" placeholder="Ã–rn: GazlÄ± Ä°Ã§ecekler"></div>
Â  Â  Â  Â  Â  Â  <div class="form-group"><label class="form-label">ÃœrÃ¼n AdÄ±</label><input type="text" id="newName" class="modern-input" placeholder="Ã–rn: Yeni Cola"></div>
Â  Â  Â  Â  Â  Â  <div class="form-group"><label class="form-label">Fiyat</label><input type="number" id="newPrice" class="modern-input" placeholder="0"></div>
Â  Â  Â  Â  Â  Â  <div class="form-group"><label class="form-label">Resim URL</label><input type="text" id="newImg" class="modern-input" placeholder="https://..."></div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="form-group" style="display:flex; align-items:center; gap:10px; cursor:pointer;" onclick="document.getElementById('newPop').click()">
Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="newPop" style="transform:scale(1.5);">
Â  Â  Â  Â  Â  Â  Â  Â  <label class="form-label" style="margin:0; cursor:pointer;">ğŸ”¥ PopÃ¼ler (Vitrine Ekle)</label>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div style="display: flex; gap: 10px; margin-top: 20px;">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="modern-btn" onclick="saveNewProduct()" style="background: var(--accent);">Kaydet</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="modern-btn" onclick="closeModal()" style="background: var(--text-muted);">Ä°ptal</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dashboard-container" id="dashboard">
Â  Â  Â  Â  <aside class="sidebar">
Â  Â  Â  Â  Â  Â  <div class="brand"><span>ğŸ›ï¸</span> Altunga Panel</div>
Â  Â  Â  Â  Â  Â  <button class="add-btn" onclick="openModal()">+ Yeni ÃœrÃ¼n Ekle</button>
Â  Â  Â  Â  Â  Â  <ul class="category-list" id="categoryList"></ul>
Â  Â  Â  Â  Â  Â  <div class="sidebar-footer">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="theme-btn" onclick="toggleTheme()" id="themeBtn">ğŸŒ™ KaranlÄ±k Mod</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="logout()" style="background:transparent; border:1px solid var(--danger); color:var(--danger); width:100%; padding:10px; border-radius:8px; cursor:pointer; margin-top:10px;">Ã‡Ä±kÄ±ÅŸ Yap</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </aside>

Â  Â  Â  Â  <main class="main-content">
Â  Â  Â  Â  Â  Â  <div class="top-bar">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="search-wrapper">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="search-icon">ğŸ”</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" class="search-input" id="search" placeholder="ÃœrÃ¼n ara..." onkeyup="searchProduct()">
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="itemCount" style="color: var(--text-muted); font-size: 0.9rem;"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="loading" style="text-align:center; margin-top:50px; display:none; color:var(--text-muted);">YÃ¼kleniyor...</div>
Â  Â  Â  Â  Â  Â  <div class="product-grid" id="productGrid"></div>
Â  Â  Â  Â  </main>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  const firebaseConfig = {
Â  Â  Â  Â  Â  Â  apiKey: "AIzaSyC2kYwYuv7drDw0zViXYN4DqpppbtP_coY",
Â  Â  Â  Â  Â  Â  authDomain: "altunga-siparis.firebaseapp.com",
Â  Â  Â  Â  Â  Â  databaseURL: "https://altunga-siparis-default-rtdb.europe-west1.firebasedatabase.app",
Â  Â  Â  Â  Â  Â  projectId: "altunga-siparis",
Â  Â  Â  Â  Â  Â  storageBucket: "altunga-siparis.appspot.com",
Â  Â  Â  Â  Â  Â  messagingSenderId: "152830720353",
Â  Â  Â  Â  Â  Â  appId: "1:152830720353:web:cc3d3646e6a859c0ca2d20",
Â  Â  Â  Â  Â  Â  measurementId: "G-JKXK55E39H"
Â  Â  Â  Â  };
Â  Â  Â  Â  firebase.initializeApp(firebaseConfig);
Â  Â  Â  Â  const db = firebase.firestore();
Â  Â  Â  Â  const auth = firebase.auth();

Â  Â  Â  Â  let allProducts = [];
Â  Â  Â  Â  let categories = new Set();
Â  Â  Â  Â  let currentCategory = "TÃ¼mÃ¼";

Â  Â  Â  Â  const exactImageMap = { "Su 500ml": "urunimg/su.png", "Coca Cola C.ÅiÅŸe 200ml.": "urunimg/cola200.png", "Coca Cola C.ÅiÅŸe 300ml.": "urunimg/sise300.png", "Coca Cola 330ml.": "urunimg/kutukola.png", "Coca Cola Zero 330ml.": "urunimg/zeroc.png", "Coca Cola 1lt.": "urunimg/1ltcola.png", "Coca Cola 1lt. Light": "urunimg/1ltcolalight.png", "Coca Cola 2,5lt.": "urunimg/2,5litre.png", "Fanta C.ÅiÅŸe 200ml.": "urunimg/fanta200cam.png", "Fanta 330ml.": "urunimg/fanta330.png", "Fanta 1lt.": "urunimg/fanta1lt.png", "Sprite 330ml.": "urunimg/sprite330.png", "Cola Turka 200ml.": "urunimg/colaturka200.png", "AvÅŸar DoÄŸal": "urunimg/avsarnatural.png", "AvÅŸar Limonlu": "urunimg/avsarlimon.png", "AvÅŸar Mango & Ananas": "urunimg/avsarmango.png", "AvÅŸar Karpuz & Ã‡ilek": "urunimg/avsarkarpuz.png", "AvÅŸar Karadut & Frenk ÃœzÃ¼mÃ¼": "urunimg/avsarkaradut.png", "AvÅŸar DÃ¼ÅŸes Armudu": "urunimg/avsarduses.png", "Damla Minera Sade": "urunimg/damlasade.png", "Damla Minera Limonlu": "urunimg/damlalimon.png", "Damla Ã‡ilekli & Karpuzlu": "urunimg/damlacilek.png", "Damla Mango & Ananas": "urunimg/damlamango.png", "Damla ElmalÄ±": "urunimg/damlaelmali.png", "Damla Minera 330ml.": "urunimg/damla330.png", "Karpuz & Ã‡ilek": "urunimg/fresacilek.png", "Limon": "urunimg/fresalimon.png", "Ã‡ilek": "urunimg/fresakarpuz.png", "BeypazarÄ± Sade": "urunimg/beypazari.png", "Red Bull 250ml.": "urunimg/redbull250.png", "Red Bull Peach E. 250ml.": "urunimg/redbullpeach.png", "Red Bull Yellow E. 250ml.": "urunimg/redbullyellow.png", "Red Bull White E. 250ml.": "urunimg/redbullwhite.png", "Red Bull Pink E. 250ml.": "urunimg/redbullpink.png", "Red Bull Red E. 250ml.": "urunimg/redbullred.png", "Red Bull Sugar E. 250ml.": "urunimg/redbullsugar.png", "Red Bull Blue E. 250ml.": "urunimg/redbullblue.png", "Red Bull Klasik 355ml.": "urunimg/redbull355.png", "Monster Klasik 500ml.": "urunimg/monster500.png", "Monster U.Tropikal 500ml.": "urunimg/monsterutropical.png", "Monster Pipeline P. 500ml.": "urunimg/monsterpipeline.png", "Monster The Doctor S. 500ml.": "urunimg/monsterthedoctor.png", "Monster Watermelon 500ml.": "urunimg/monsterwatermelon.png", "Monster R.W. Pineapple 500ml.": "urunimg/monsterpineapple.png", "Monster U.Sunrise 500ml.": "urunimg/monstersunrise.png", "Monster Mango Loco 500ml.": "urunimg/monstermango.png", "Monster Ultra White 500ml.": "urunimg/monsterultra.png", "Burn Original 250ml.": "urunimg/burn250.png", "Burn Gold Spark 250ml.": "urunimg/burngold.png", "Burn Zero Sugar 250ml.": "urunimg/burnzero.png", "Burn 500ml.": "urunimg/burn500.png", "Powerade Ice Blast 500ml.": "urunimg/poweradeice.png", "Powerade Sun Brush 500ml.": "urunimg/poweradesun.png", "Fusetea Åeftali 330ml.": "urunimg/fuseteaseftali.png", "Fusetea Limon 330ml.": "urunimg/fusetealimon.png", "Fusetea Frambuaz & BÃ¶ÄŸÃ¼rtlen 330ml.": "urunimg/fuseteabogurtlen.png", "Fusetea Mango & Ananas 330ml.": "urunimg/fuseteamango.png", "Fusetea Karpuz 330ml.": "urunimg/fuseteakarpuz.png", "Fusetea Kavun & Ã‡ilek 330ml.": "urunimg/fuseteakavun.png", "Fusetea Åeftali 1lt.": "urunimg/fuseteaseftali1lt.png", "Fusetea Karpuz 1lt.": "urunimg/fuseteakarpuz1lt.png", "Fusetea Limon 1lt.": "urunimg/fusetealimon1lt.png", "Fusetea Mango & Ananas 1lt.": "urunimg/fuseteamango1lt.png", "Fusetea Kavun & Ã‡ilek 1lt.": "urunimg/fuseteakavun1lt.png", "Fusetea Ejder Meyveli 1lt.": "urunimg/fuseteaejder.png", "Didi Åeftali 330ml.": "urunimg/didiseftali.png", "Didi Limon 330ml.": "urunimg/didilimon.png", "Didi Bergamot 330ml.": "urunimg/didibergamot.png", "Obsesson Latte SÃ¼tlÃ¼ 250ml.": "urunimg/obsessolattesutlu.png", "Obsesson Caramel Macchiato 250ml.": "urunimg/obsessocaramel.png", "Nescafe Xpress L. Original 250ml.": "urunimg/nescafeorijinal.png", "Nescafe Black Roast 250ml.": "urunimg/nescafeblack.png", "Cappy ViÅŸne 330ml.": "urunimg/cappyvisne.png", "Cappy Portakal 330ml.": "urunimg/cappyportakal.png", "Cappy Atom - BallÄ± K. 330ml.": "urunimg/cappyatom.png", "Caprisun Multivitamin 200ml.": "urunimg/caprisunmulti.png", "Caprisun Safari 200ml.": "urunimg/caprisunsafari.png", "Caprisun Mystic Dragon 200ml.": "urunimg/caprisundragon.png", "Link Ã‡ilekli 200ml.": "urunimg/linkcilekli.png", "Original 20gr.": "urunimg/rufflesoriginal.png", "Original 50gr.": "urunimg/rufflesoriginal.png", "Original Orta Boy 88gr.": "urunimg/rufflesoriginal.png", "Original Orta Boy 105gr.": "urunimg/rufflesoriginal.png", "Original BÃ¼yÃ¼k Boy 160gr.": "urunimg/rufflesoriginal.png", "Original Mega Boy 193gr.": "urunimg/rufflesoriginalmega.png", "KetÃ§aplÄ± 50gr.": "urunimg/rufflesketcap.png", "KetÃ§aplÄ± Orta Boy 105gr.": "urunimg/rufflesketcap.png", "KetÃ§aplÄ± BÃ¼yÃ¼k Boy 160gr.": "urunimg/rufflesketcap.png", "Peynir & SoÄŸan Orta Boy 105gr.": "urunimg/rufflespeynir.png", "Peynir & SoÄŸan BÃ¼yÃ¼k Boy 160gr.": "urunimg/rufflespeynir.png", "Mangalda Orta Boy 105gr.": "urunimg/rufflesmangalda.png", "DeÄŸiÅŸ TokuÅŸ Orta Boy 105gr.": "urunimg/rufflesdegis.png", "Lays YoÄŸurt ve Mevsim YeÅŸil. KÃ¼Ã§Ã¼k Boy 50gr.": "urunimg/laysyogurttan.png", "Lays Klasik KÃ¼Ã§Ã¼k Boy 50gr.": "urunimg/laysklasik50.png", "Lays Klasik Orta Boy 107gr.": "urunimg/laysklasik107.png", "Lays FÄ±rÄ±ndan Orta Boy 92gr.": "urunimg/laysfirindan.png", "Lays FÄ±rÄ±ndan BÃ¼yÃ¼k Boy 134gr.": "urunimg/laysfirindan.png", "Lays BaharatlÄ± Orta Boy 105gr.": "urunimg/laysbaharatli.png", "Lays YoÄŸurt ve Mevsim YeÅŸil. Orta Boy 105gr.": "urunimg/laysyogurttan.png", "Lays YoÄŸurt ve Mevsim YeÅŸil. BÃ¼yÃ¼k Boy 160gr.": "urunimg/laysyogurttan.png", "Lays BaharatlÄ± BÃ¼yÃ¼k Boy 160gr.": "urunimg/laysbaharatli.png", "Lays Klasik BÃ¼yÃ¼k Boy 160gr.": "urunimg/laysklasik.png", "Doritos Shoots Mexicano - AcÄ± (30gr.": "urunimg/doritosshootsmexicano.png", "Doritos Shoots 30gr.": "urunimg/doritosshoots.png", "Doritos Tako KÃ¼Ã§Ã¼k Boy 53gr.": "urunimg/doritostaco.png", "Doritos Hot Corn AcÄ± B. KÃ¼Ã§Ã¼k Boy 53gr.": "urunimg/doritoshotcorn.png", "Doritos Hot Corn BÃ¼yÃ¼k Boy 180gr.": "urunimg/doritoshotcorn.png", "Doritos Tako Orta Boy 114gr.": "urunimg/doritostaco.png", "Doritos Tako BÃ¼yÃ¼k Boy 185gr.": "urunimg/doritostaco.png", "Doritos Nacho P. Orta Boy 109gr.": "urunimg/doritosnacho.png", "Doritos Nacho P. BÃ¼yÃ¼k Boy 160gr.": "urunimg/doritosnacho.png", "Doritos Tako Mega Boy 193gr.": "urunimg/doritostaco.png", "Doritos Extreme Mex. Orta Boy 109gr.": "urunimg/doritosextreme.png", "Doritos Flamin Hot Orta Boy 102gr.": "urunimg/doritosflamin.png", "Doritos Turca SÃ¼per Boy 109gr.": "urunimg/doritosturca.png", "Doritos DeÄŸiÅŸ TokuÅŸ 115gr.": "urunimg/doritosswap.png", "Ã‡erezza Kokteyl BaharatlÄ± Orta Boy 117 gr.": "urunimg/cerezzakokteyl.png", "Ã‡erezza Sinema Pey.SoÄŸ. Orta Boy 121 gr.": "urunimg/cerezzasinema.png", "Ã‡erezza SÃ¼t MÄ±sÄ±rÄ± Orta Boy 121 gr.": "urunimg/cerezzamisir.png", "Ã‡erezza Popcorn Orta Boy 80 gr.": "urunimg/cerezzapopcorn.png", "Ã‡erezza AcÄ±lÄ± SÃ¼per Boy 117 gr.": "urunimg/cerezzaacili.png", "Ã‡erezza Dev Bah. Dom. Soslu 150 gr.": "urunimg/cerezzadev.png", "Ã‡erezza Dev Yer. FÄ±s. BÃ¼yÃ¼k Boy 145 gr.": "urunimg/cerezzadevyer.png", "Cheetos Biftek & SoÄŸan 43gr.": "urunimg/cheetos.png", "Cheetos Biftek & SoÄŸan 23gr.": "urunimg/cheetosshoots.png", "Gong Peynir ve AcÄ±lÄ± M. PatlaÄŸÄ±": "urunimg/gongaci.png", "Gong Bal ve HardallÄ± M. PatlaÄŸÄ±": "urunimg/gongbal.png", "Gong Orijinal Lezzet": "urunimg/gongoriginal.png", "Gong Pops Bal ve HardallÄ± M. PatlaÄŸÄ±": "urunimg/gongpopsbal.png", "Gong Pops Taco": "urunimg/gongpopstaco.png", "Haylayf": "urunimg/haylayf.png", "Ã‡izi Peynirli": "urunimg/cizipeynirli.png", "Ã‡iziviÃ§ Peynirli": "urunimg/cizipeynir.png", "Ä°kram Ã‡ikolatalÄ±": "urunimg/ikramcikolatali.png", "Ä°kram FÄ±ndÄ±klÄ±": "urunimg/ikramfindik.png", "HanÄ±meller FÄ±ndÄ±klÄ±": "urunimg/hanimellerfindikli.png", "HanÄ±meller Ã‡oko Damla": "urunimg/hanimellercokodam.png", "Biskrem": "urunimg/biskrem.png", "Halley": "urunimg/halleyy.png", "HanÄ±meller FrambuazlÄ±": "urunimg/hanimellerframbuaz.png", "Biskrem Cookie": "urunimg/biskremcookie.png", "Halley Karadutlu": "urunimg/halleykaradut.png", "Probis": "urunimg/probis.png", "Cocostar AtÄ±ÅŸtÄ±rmalÄ±k": "urunimg/cocostaratistirmalik.png", "Tutku": "urunimg/tutku.png", "Benim'o Bitter": "urunimg/benimobitter.png", "Benim'o Ã‡ikolatalÄ±": "urunimg/benimociko.png", "Nero": "urunimg/nero.png", "Cin": "urunimg/cin.png", "Canga": "urunimg/canga.png", "Petito Gofret": "urunimg/petitogofret.png", "Maximus Loading XL": "urunimg/maximusloadingxl.png", "HoÅŸbeÅŸ Kakaolu": "urunimg/hosbeskakao.png", "Maximus": "urunimg/maximus36.png", "Karam": "urunimg/karamgurme.png", "Petito Patim": "urunimg/petitopatim.png", "Petito Mini": "urunimg/petitomini.png", "Maximus Ã‡ilekli": "urunimg/maximuscilekli.png", "Canga Antep FÄ±stÄ±klÄ±": "urunimg/cangaantep.png", "Maximus Muzlu": "urunimg/maximusmuzlu.png", "HoÅŸbeÅŸ FÄ±ndÄ±klÄ±": "urunimg/hosbesfindikli.png", "Caramio Karamel": "urunimg/caramiokaramel.png", "Ã‡okonat Antep FÄ±stÄ±klÄ±": "urunimg/cokonatfindikli.png", "Olala Tiramisu": "urunimg/olalatramisu.png", "Olala Bold": "urunimg/olalabold.png", "9 Kat Tat Muzlu": "urunimg/9katmuzlu.png", "9 Kat Tat FÄ±ndÄ±klÄ±": "urunimg/9katfindikli.png", "9 Kat Tat PortakallÄ±": "urunimg/9katportakal.png", "Ã‡okonat": "urunimg/cokonat.png", "Dido SÃ¼tlÃ¼ Ã‡ikolatalÄ±": "urunimg/didosutluciko.png", "Coco Star": "urunimg/cocostar1.png", "Laviva": "urunimg/laviva.png", "Rulokat": "urunimg/rulokat.png", "Piko": "urunimg/piko.png", "Dido FrambuazlÄ±": "urunimg/didoframbuaz.png", "Dido Trio": "urunimg/didotrioo.png", "Dido Trio Colors Ã‡ilekli": "urunimg/didotrio.png", "Dido Gold": "urunimg/didogold.png", "FÄ±ndÄ±k RÃ¼yasÄ±": "urunimg/findikruyasi.png", "Ã‡okomel": "urunimg/cokomel.png", "Harby Karamelli": "urunimg/harbykaramel.png", "Harby SÃ¼tlÃ¼": "urunimg/harbysutlu.png", "3GEN Beyaz": "urunimg/3genbeyaz.png", "Popkek Muzlu": "urunimg/popkekmuz.png", "Popkek Ã‡ikolatalÄ±": "urunimg/popkekciko.png", "Popkek Limonlu": "urunimg/popkeklimonlu.png", "Popkek ViÅŸneli": "urunimg/popkekvisneli.png", "Popkek Portakal": "urunimg/popkekportakal.png", "Popkek Bitter": "urunimg/popkekbitter.png", "Popkek Hindistan Cevizli": "urunimg/popkekcoconut.png", "Browni Gold Ã‡ikolatalÄ±": "urunimg/brownigold.png", "Browni Gold ViÅŸneli": "urunimg/brownigoldvisneli.png", "Browni Ä°ntense Gold Karamel": "urunimg/browniintense.png", "Browni Ä°ntense Gold Ã‡ikolatalÄ±": "urunimg/browniintenseciko.png", "SÃ¼tburger SÃ¼tlÃ¼ & Ã‡ilekli": "urunimg/sutburgercilekli.png", "SÃ¼tburger SÃ¼tlÃ¼ & BallÄ±": "urunimg/sutburgerballi.png", "Dankek Mousse": "urunimg/dankekmousse.png", "8 Kek Muzlu": "urunimg/8kekmuzlu.png", "8 Kek Orman Meyveli": "urunimg/8kekorman.png", "8 Kek Ã‡ilekli": "urunimg/8kekcilek.png", "8 Kek Ã‡ikolatalÄ±": "urunimg/8kekcikolatali.png", "Kekstra JÃ¶le Bol": "urunimg/kekstrajolebol.png", "Ã‡ubuk Kraker": "urunimg/kraker.png", "SusamlÄ± Ã‡ubuk Kraker": "urunimg/susamlikraker.png", "Krispi AcÄ±lÄ±": "urunimg/krispiacili.png", "Krispi BaharatlÄ±": "urunimg/krispibaharatli.png", "Krispi Peynirli": "urunimg/krispipeynirli.png", "AyÄ±cÄ±k": "urunimg/yupoayicik.png", "Solucan": "urunimg/yuposolucan.png", "Meyve BahÃ§esi": "urunimg/yupomeyvebahcesi.png", "Kola": "urunimg/yupokola.png", "Lokumcuk": "urunimg/lokum.png", "Ã‡okojela PortakallÄ±": "urunimg/yupojelapor.png", "Ã‡okojela BÃ¶ÄŸÃ¼rtlen": "urunimg/yupojelabog.png", "Yupo Lolipop": "urunimg/yupololi.png", "Bonbon Nanelim": "urunimg/nanelim.png", "Portakal & Kivi": "urunimg/oneopor.png", "Nane & Kivi": "urunimg/oneonane.png", "YeÅŸil Nane": "urunimg/oneoyesilnane.png", "Karpuz": "urunimg/oneokarpuz.png", "Ã‡ilek": "urunimg/oneocilek.png", "Zencefil": "urunimg/zencefil.png", "KaramÃ¼rver": "urunimg/karamurver.png", "Okaliptus": "urunimg/okaliptus.png", "Ihlamur": "urunimg/Ä±hlamur.png", "Lolipop": "urunimg/roccololipop.png", "SÄ±kÄ±ÅŸeker Ahududu & Limon": "urunimg/roccoahududu.png", "SÄ±kÄ±ÅŸeker Mandalina & Karpuz": "urunimg/roccomandalina.png", "SÄ±kÄ±ÅŸeker Nar & Ã‡ilek": "urunimg/rocconar.png", "Stick Fruit Garden": "urunimg/jelly.png", "Patso Yeni": "urunimg/patso.png", "Sosisli Patso": "urunimg/patsososisli.png", "Patso MenÃ¼ (Patso + Å.Kola)": "urunimg/patsomenu.png", "KaÅŸarlÄ± Tost": "urunimg/kasarlitost.png", "Sucuklu Tost": "urunimg/sucuklutost.png", "KarÄ±ÅŸÄ±k Tost": "urunimg/karisiktost.png", "Tavuk DÃ¶ner 70gr.": "urunimg/tavukdoner.png", "Tavuk DÃ¶ner 90gr.": "urunimg/tavukdoner.png", "Tavuk DÃ¶ner 120gr.": "urunimg/tavukdoner.png", "Et DÃ¶ner 70gr.": "urunimg/etdoner.png", "Et DÃ¶ner 90gr.": "urunimg/etdoner.png", "Et DÃ¶ner 120gr.": "urunimg/etdoner.png", "Cornetto Disc Milka": "urunimg/cornettomilka.png", "Cornetto Disc Oreo": "urunimg/cornettooreo.png", "Cornetto Antep FÄ±stÄ±klÄ±": "urunimg/cornettoantep.png", "Cornetto Vanilya Karamel": "urunimg/cornettovan.png", "Cornetto MaraÅŸ UsulÃ¼": "urunimg/cornettomarasusulu.png", "Cornetto Clas Ã‡ilek": "urunimg/cornettoclascilek.png", "Cornetto Disc Max Mango": "urunimg/cornettodiskmax.png", "Cornetto Disc Max Ã‡ikolatalÄ±": "urunimg/cornettodiscciko.png", "Cornetto Classico Ã‡ikolata": "urunimg/cornettoclassico.png", "Cornetto Classico Kaymak": "urunimg/cornettoclassicokaymak.png", "Cornetto Keyif": "urunimg/keyf.png", "Utopia Ahududu": "urunimg/utopia.png", "Utopia Karamel": "urunimg/utopiakaramel.png", "Classic": "urunimg/magnumclassic.png", "Beyaz": "urunimg/magnumbeyaz.png", "Badem": "urunimg/magnumbadem.png", "Double Ã‡ikolata": "urunimg/magnumdouble.png", "Double Karadut": "urunimg/magnumdoublekaradut.png", "Cookie": "urunimg/cookie.png", "Boom Boom": "urunimg/boomboom.png", "Boom Boom Gold": "urunimg/boomboomgold.png", "CL Frigola Bar PRM": "urunimg/frigola.png", "CL Classics Antep FÄ±stÄ±k": "urunimg/clfistik.png", "CL Classics Kakao": "urunimg/clkakao.png", "MaraÅŸ Cup": "urunimg/cup.png", "Nogger Sandwich": "urunimg/nogger.png", "Milka Stick": "urunimg/milkas.png", "Vienetta Stick": "urunimg/vienetta.png", "Volcano Stick": "urunimg/volcanostick.png", "Conboo Kakao": "urunimg/conboo.png", "Twister Forest": "urunimg/forest.png", "Twister Ocean": "urunimg/ocean.png", "Twister Cool": "urunimg/cool.png" };
Â  Â  Â  Â  const catImages = { "Ä°Ã§ecekler": "icecekler.png", "AtÄ±ÅŸtÄ±rmalÄ±k": "cips.png", "Åekerleme": "jelibon.png", "Fast Food": "patso.png", "Dondurma": "dondurma.png", "DÃ¶ner": "doner.png", "Tost": "tost.png" };

Â  Â  Â  Â  auth.onAuthStateChanged(user => {
Â  Â  Â  Â  Â  Â  if (user) {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('login-screen').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('dashboard').style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  fetchData();
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('login-screen').style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('dashboard').style.display = 'none';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  function login() {
Â  Â  Â  Â  Â  Â  auth.signInWithEmailAndPassword(document.getElementById('email').value, document.getElementById('password').value)
Â  Â  Â  Â  Â  Â  Â  Â  .catch(() => document.getElementById('loginMsg').innerText = "HatalÄ± GiriÅŸ!");
Â  Â  Â  Â  }
Â  Â  Â  Â  function logout() { auth.signOut(); }

Â  Â  Â  Â  const savedTheme = localStorage.getItem('theme');
Â  Â  Â  Â  if (savedTheme === 'dark') {
Â  Â  Â  Â  Â  Â  document.body.classList.add('dark-mode');
Â  Â  Â  Â  Â  Â  document.getElementById('themeBtn').innerHTML = "â˜€ï¸ AydÄ±nlÄ±k Mod";
Â  Â  Â  Â  }
Â  Â  Â  Â  function toggleTheme() {
Â  Â  Â  Â  Â  Â  document.body.classList.toggle('dark-mode');
Â  Â  Â  Â  Â  Â  const isDark = document.body.classList.contains('dark-mode');
Â  Â  Â  Â  Â  Â  localStorage.setItem('theme', isDark ? 'dark' : 'light');
Â  Â  Â  Â  Â  Â  document.getElementById('themeBtn').innerHTML = isDark ? "â˜€ï¸ AydÄ±nlÄ±k Mod" : "ğŸŒ™ KaranlÄ±k Mod";
Â  Â  Â  Â  }

Â  Â  Â  Â  async function fetchData() {
Â  Â  Â  Â  Â  Â  document.getElementById('loading').style.display = 'block';
Â  Â  Â  Â  Â  Â  const snapshot = await db.collection("menu_items").orderBy("category").get();
Â  Â  Â  Â  Â  Â  allProducts = [];
Â  Â  Â  Â  Â  Â  categories = new Set();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  snapshot.forEach(doc => {
Â  Â  Â  Â  Â  Â  Â  Â  const data = doc.data();
Â  Â  Â  Â  Â  Â  Â  Â  allProducts.push({ id: doc.id, ...data });
Â  Â  Â  Â  Â  Â  Â  Â  categories.add(data.category);
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  renderSidebar();
Â  Â  Â  Â  Â  Â  renderProducts(currentCategory);
Â  Â  Â  Â  Â  Â  document.getElementById('loading').style.display = 'none';
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderSidebar() {
Â  Â  Â  Â  Â  Â  const list = document.getElementById('categoryList');
Â  Â  Â  Â  Â  Â  list.innerHTML = `<button class="cat-btn ${currentCategory === 'TÃ¼mÃ¼' ? 'active' : ''}" onclick="filterCat('TÃ¼mÃ¼', this)">ğŸ  TÃ¼mÃ¼</button>`;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const icons = { "Ä°Ã§ecekler": "ğŸ¥¤", "AtÄ±ÅŸtÄ±rmalÄ±k": "ğŸŸ", "Åekerleme": "ğŸ¬", "Fast Food": "ğŸ”", "DÃ¶ner": "ğŸ¥™", "Dondurma": "ğŸ¦", "Tost": "ğŸ¥ª" };

Â  Â  Â  Â  Â  Â  categories.forEach(cat => {
Â  Â  Â  Â  Â  Â  Â  Â  list.innerHTML += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="cat-btn ${currentCategory === cat ? 'active' : ''}" onclick="filterCat('${cat}', this)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${icons[cat] || "ğŸ“¦"} ${cat}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>`;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function filterCat(catName, btnElement) {
Â  Â  Â  Â  Â  Â  currentCategory = catName;
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
Â  Â  Â  Â  Â  Â  if(btnElement) btnElement.classList.add('active');
Â  Â  Â  Â  Â  Â  renderProducts(catName);
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderProducts(filter) {
Â  Â  Â  Â  Â  Â  const grid = document.getElementById('productGrid');
Â  Â  Â  Â  Â  Â  grid.innerHTML = "";
Â  Â  Â  Â  Â  Â  let filteredList = allProducts;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (filter !== "TÃ¼mÃ¼") filteredList = allProducts.filter(p => p.category === filter);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const searchVal = document.getElementById('search').value.toLowerCase();
Â  Â  Â  Â  Â  Â  if(searchVal) filteredList = filteredList.filter(p => p.name_tr.toLowerCase().includes(searchVal));

Â  Â  Â  Â  Â  Â  document.getElementById('itemCount').innerText = `${filteredList.length} Ã¼rÃ¼n gÃ¶steriliyor`;

Â  Â  Â  Â  Â  Â  filteredList.forEach(p => {
Â  Â  Â  Â  Â  Â  Â  Â  // GÃ¶rsel: Ã–nce DB, sonra Harita, sonra Kategori, en son Logo
Â  Â  Â  Â  Â  Â  Â  Â  let imgSrc = p.image;
Â  Â  Â  Â  Â  Â  Â  Â  if (!imgSrc || imgSrc === 'default.png' || imgSrc === '') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  imgSrc = exactImageMap[p.name_tr] || catImages[p.category.trim()] || 'logo.png';
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  // Butonun rengi: PopÃ¼lerse kÄ±rmÄ±zÄ± (active), deÄŸilse gri
Â  Â  Â  Â  Â  Â  Â  Â  const popClass = p.isPopular ? 'active' : '';
Â  Â  Â  Â  Â  Â  Â  Â  const popIcon = p.isPopular ? 'ğŸ”¥' : 'â˜ï¸';

Â  Â  Â  Â  Â  Â  Â  Â  grid.innerHTML += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="product-card">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="p-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${imgSrc}" class="p-img" onerror="this.src='logo.png'">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="p-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>${p.name_tr}</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>${p.group}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="p-footer">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size:0.8rem; color:var(--text-muted)">â‚º</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" class="price-inp" id="price-${p.id}" value="${p.price}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="action-btns">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="icon-btn btn-pop ${popClass}" onclick="togglePopular('${p.id}', ${!p.isPopular})" title="Vitrine Ekle/Ã‡Ä±kar">${popIcon}</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="icon-btn btn-save" onclick="updatePrice('${p.id}')">Kaydet</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function updatePrice(id) {
Â  Â  Â  Â  Â  Â  const val = parseFloat(document.getElementById(`price-${id}`).value);
Â  Â  Â  Â  Â  Â  const btn = event.target;
Â  Â  Â  Â  Â  Â  btn.innerText = "â³";
Â  Â  Â  Â  Â  Â  db.collection("menu_items").doc(id).update({ price: val })
Â  Â  Â  Â  Â  Â  Â  Â  .then(() => { btn.innerText = "âœ“"; setTimeout(() => { btn.innerText = "Kaydet"; }, 1000); });
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- POPÃœLERLÄ°K DEÄÄ°ÅTÄ°RME ---
Â  Â  Â  Â  function togglePopular(id, newStatus) {
Â  Â  Â  Â  Â  Â  // Animasyon veya bekleme ikonu koyabiliriz ama basitlik iÃ§in direkt gÃ¼ncelleyelim
Â  Â  Â  Â  Â  Â  db.collection("menu_items").doc(id).update({ isPopular: newStatus })
Â  Â  Â  Â  Â  Â  Â  Â  .then(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Listeyi yenilemeden sadece butonu gÃ¼ncellemek daha hÄ±zlÄ± olur ama
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // array'i de gÃ¼ncellememiz lazÄ±m. En temiz yol yeniden fetch.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchData();
Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  .catch(err => alert("Hata: " + err));
Â  Â  Â  Â  }

Â  Â  Â  Â  function searchProduct() { renderProducts(currentCategory); }

Â  Â  Â  Â  function openModal() {
Â  Â  Â  Â  Â  Â  const select = document.getElementById('newCatSelect');
Â  Â  Â  Â  Â  Â  select.innerHTML = '<option value="">SeÃ§iniz...</option>';
Â  Â  Â  Â  Â  Â  categories.forEach(cat => {
Â  Â  Â  Â  Â  Â  Â  Â  select.innerHTML += `<option value="${cat}">${cat}</option>`;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  select.innerHTML += '<option value="new">+ Yeni Kategori OluÅŸtur</option>';
Â  Â  Â  Â  Â  Â  document.getElementById('addModal').style.display = 'flex';
Â  Â  Â  Â  }

Â  Â  Â  Â  function closeModal() {
Â  Â  Â  Â  Â  Â  document.getElementById('addModal').style.display = 'none';
Â  Â  Â  Â  Â  Â  document.getElementById('newCatSelect').value = "";
Â  Â  Â  Â  Â  Â  document.getElementById('newCatInput').style.display = "none";
Â  Â  Â  Â  Â  Â  document.getElementById('newCatInput').value = "";
Â  Â  Â  Â  Â  Â  document.getElementById('newGroup').value = "";
Â  Â  Â  Â  Â  Â  document.getElementById('newName').value = "";
Â  Â  Â  Â  Â  Â  document.getElementById('newPrice').value = "";
Â  Â  Â  Â  Â  Â  document.getElementById('newImg').value = "";
Â  Â  Â  Â  Â  Â  document.getElementById('newPop').checked = false;
Â  Â  Â  Â  }

Â  Â  Â  Â  function checkNewCategory(elem) {
Â  Â  Â  Â  Â  Â  const input = document.getElementById('newCatInput');
Â  Â  Â  Â  Â  Â  if (elem.value === 'new') {
Â  Â  Â  Â  Â  Â  Â  Â  input.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  input.focus();
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  input.style.display = 'none';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function saveNewProduct() {
Â  Â  Â  Â  Â  Â  const selectVal = document.getElementById('newCatSelect').value;
Â  Â  Â  Â  Â  Â  let category = selectVal;
Â  Â  Â  Â  Â  Â  if (selectVal === 'new') category = document.getElementById('newCatInput').value.trim();

Â  Â  Â  Â  Â  Â  const group = document.getElementById('newGroup').value.trim();
Â  Â  Â  Â  Â  Â  const name = document.getElementById('newName').value.trim();
Â  Â  Â  Â  Â  Â  const price = parseFloat(document.getElementById('newPrice').value);
Â  Â  Â  Â  Â  Â  const img = document.getElementById('newImg').value.trim();
Â  Â  Â  Â  Â  Â  const isPop = document.getElementById('newPop').checked;

Â  Â  Â  Â  Â  Â  if (!category || !group || !name || isNaN(price)) {
Â  Â  Â  Â  Â  Â  Â  Â  alert("LÃ¼tfen tÃ¼m zorunlu alanlarÄ± doldurun!");
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const btn = event.target;
Â  Â  Â  Â  Â  Â  btn.innerText = "Kaydediliyor...";
Â  Â  Â  Â  Â  Â  btn.disabled = true;

Â  Â  Â  Â  Â  Â  const finalImg = img || 'default.png';

Â  Â  Â  Â  Â  Â  db.collection("menu_items").add({
Â  Â  Â  Â  Â  Â  Â  Â  category: category,
Â  Â  Â  Â  Â  Â  Â  Â  group: group,
Â  Â  Â  Â  Â  Â  Â  Â  name_tr: name,
Â  Â  Â  Â  Â  Â  Â  Â  price: price,
Â  Â  Â  Â  Â  Â  Â  Â  image: finalImg,
Â  Â  Â  Â  Â  Â  Â  Â  name_en: name,
Â  Â  Â  Â  Â  Â  Â  Â  isPopular: isPop
Â  Â  Â  Â  Â  Â  }).then(() => {
Â  Â  Â  Â  Â  Â  Â  Â  alert("âœ… ÃœrÃ¼n baÅŸarÄ±yla eklendi!");
Â  Â  Â  Â  Â  Â  Â  Â  closeModal();
Â  Â  Â  Â  Â  Â  Â  Â  fetchData();Â 
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerText = "Kaydet";
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  }).catch((error) => {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Hata:", error);
Â  Â  Â  Â  Â  Â  Â  Â  alert("Hata oluÅŸtu: " + error.message);
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerText = "Kaydet";
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  </script>
</body>
</html> 
